<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>On-Page SEO Analysis Tool</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 400px;
        }
        h1 {
            color: #333;
        }
        input {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #28a745;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #218838;
        }
        #results {
            margin-top: 20px;
            text-align: left;
            overflow: hidden;
            overflow-y: scroll;
            max-height: 400px;
        }
        .error {
            color: red;
        }
        img {
            max-width: 100px;
            max-height: 100px;
            display: block;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>On-Page SEO Analysis Tool</h1>
        <input type="text" id="urlInput" placeholder="Enter website URL">
        <button id="analyzeBtn">Analyze</button>
        <div id="results"></div>
    </div>

    <script>
        $(document).ready(function() {
            $('#analyzeBtn').click(function() {
                let url = $('#urlInput').val().trim();
                if (url === '') {
                    alert('Please enter a URL');
                    return;
                }
                
                $('#results').html('<p>Fetching data...</p>');
                
                fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`)
                    .then(response => response.json())
                    .then(data => {
                        let parser = new DOMParser();
                        let doc = parser.parseFromString(data.contents, 'text/html');
                        
                        let title = doc.querySelector('title') ? doc.querySelector('title').innerText : 'Not found';
                        let metaDesc = doc.querySelector('meta[name="description"]') ? doc.querySelector('meta[name="description"]').content : 'Not found';
                        let hTags = [];
                        for (let i = 1; i <= 6; i++) {
                            let tags = doc.querySelectorAll(`h${i}`);
                            tags.forEach(tag => {
                                hTags.push(`<p><strong>H${i}:</strong> ${tag.innerText}</p>`);
                            });
                        }
                        let imgTags = doc.querySelectorAll('img');
                        let imgWithoutAltCount = [...imgTags].filter(img => !img.alt).length;
                        let textContent = doc.body.innerText.replace(/\s+/g, ' ').trim();
                        let textLength = textContent.length;
                        let htmlLength = data.contents.length;
                        let textToHtmlRatio = ((textLength / htmlLength) * 100).toFixed(2) + '%';
                        let favicon = doc.querySelector("link[rel='icon']") ? doc.querySelector("link[rel='icon']").href : 'Not found';
                        let structuredData = doc.querySelector('script[type="application/ld+json"]') ? doc.querySelector('script[type="application/ld+json"]').innerText : 'Not found';
                        
                        let socialLinks = [];
                        let socialPlatforms = ['facebook.com', 'twitter.com', 'linkedin.com', 'instagram.com', 'youtube.com'];
                        doc.querySelectorAll('a').forEach(link => {
                            if (socialPlatforms.some(platform => link.href.includes(platform))) {
                                socialLinks.push(`<a href="${link.href}" target="_blank">${link.href}</a>`);
                            }
                        });

                        $('#results').html(`
                            <h2>SEO Analysis Results</h2>
                            <p><strong>Title:</strong> ${title}</p>
                            <p><strong>Meta Description:</strong> ${metaDesc}</p>
                            <p><strong>Heading Tags:</strong></p>
                            ${hTags.length > 0 ? hTags.join('') : '<p>No headings found.</p>'}
                            <p><strong>Images Without Alt Text:</strong> ${imgWithoutAltCount}</p>
                            <p><strong>Text-to-HTML Ratio:</strong> ${textToHtmlRatio}</p>
                            <p><strong>Favicon:</strong> ${favicon !== 'Not found' ? `<img src="${favicon}" alt="Favicon">` : 'Not found'}</p>
                            <p><strong>Structured Data:</strong> <pre>${structuredData}</pre></p>
                            <p><strong>Social Media Links:</strong> ${socialLinks.length > 0 ? socialLinks.join('<br>') : 'Not found'}</p>
                        `);
                    })
                    .catch(() => {
                        $('#results').html('<p class="error">Failed to fetch data. Make sure the URL is accessible.</p>');
                    });
            });
        });
    </script>
</body>
</html>
